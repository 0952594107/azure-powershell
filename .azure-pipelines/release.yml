variables:
  WindowsImage: VS2017-Win2016
  Configuration: Release

jobs:
- job: Build
  displayName: Build
  condition: succeeded()
  pool:
    vmImage: ${{ variables.WindowsImage }}

  steps:
  - pwsh: 'Install-Module platyPS -Force -Confirm:$false -Scope CurrentUser'
    displayName: 'Install platyPS'
  - task: DotNetCoreCLI@2
    displayName: Build
    inputs:
      command: custom
      custom: msbuild
      arguments: 'build.proj /t:Build;GenerateHelp;Publish /p:Configuration=${{ variables.Configuration }}'
  - template: util/publish-artifacts-steps.yml
    parameters:
      artifactName: release