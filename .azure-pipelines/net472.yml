variables:
  windows: windows
  windowsVm: VS2017-Win2016
  testFramework: net472
  testTarget: TestNet472

jobs:
- job: Build
  displayName: Build
  condition: succeeded()
  pool:
    vmImage: ${{ variables['windowsVm'] }}

  steps:
  - template: util/build-steps.yml
    parameters:
      osName: ${{ variables['windows'] }}
      vmImage: ${{ variables['windowsVm'] }}
      testFramework: ${{ variables['testFramework'] }}

- job: Test
  displayName: Test
  dependsOn: Build
  condition: succeeded()
  timeoutInMinutes: 120
  pool:
    vmImage: ${{ variables['windowsVm'] }}

  steps:
  - template: util/test-steps.yml
    parameters:
      osName: ${{ variables['windows'] }}
      vmImage: ${{ variables['windowsVm'] }}
      testFramework: ${{ variables['testFramework'] }}
      testTarget: ${{ variables['testTarget'] }}